;/*FB_PKG_DELIM*/

__d("CometNewsFeedVPVDStore_newsFeedEdge.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"CometNewsFeedVPVDStore_newsFeedEdge"};e.exports=a}),null);
__d("registerSourceForView",["DTSG","DTSGUtils","SprinkleConfig","XCometPrivacySandboxRegisterSourceControllerRouteBuilder","isAttributionReportingAPIEnabled"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(!c("isAttributionReportingAPIEnabled")())return;var e={eventSourceEligible:!0,triggerEligible:!1},f={},g=c("XCometPrivacySandboxRegisterSourceControllerRouteBuilder").buildUri({});a!=null&&a.length>0?f.eid=a:b!=null&&b.length>0&&(f.xt=b);a=d("DTSG").getToken();a!=null&&a.length>0&&(f.fb_dtsg=a,c("SprinkleConfig").param_name.length>0&&(f[c("SprinkleConfig").param_name]=c("DTSGUtils").getNumericValue(a)));b=Object.keys(f).map(function(a){return[encodeURIComponent(a),encodeURIComponent(f[a])].join("=")}).join("&");window.fetch(g,{attributionReporting:e,body:b,headers:{"Content-Type":"application/x-www-form-urlencoded"},keepalive:!0,method:"POST"})}g["default"]=a}),98);
__d("CometNewsFeedVPVDStore",["CircularBuffer","CometNewsFeedVPVDStore_newsFeedEdge.graphql","CometRelay","emptyFunction","react","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.useCallback,m=k.useContext,n=new(c("CircularBuffer"))(5);function a(){return n.read()}k=function(){var a=new(c("CircularBuffer"))(50);return{readRecentVPVDs:function(){var b=a.read();a.clear();return b},writeRecentVPVD:function(e,f,g){var i=d("CometRelay").readInlineData(h!==void 0?h:h=b("CometNewsFeedVPVDStore_newsFeedEdge.graphql"),f);if(!n.read().includes((f=i.feed_backend_data)==null?void 0:f.vsid)){n.write((f=i.feed_backend_data)==null?void 0:f.vsid)}f=a.read().find(function(a){var b;a=a.vsid;return(i==null?void 0:(b=i.feed_backend_data)==null?void 0:b.vsid)===a});if(f)return;a.write({client_vpv_token:c("uuidv4")(),evt:"vpv",feed_backend_data_serialized_payloads:i==null?void 0:(f=i.feed_backend_data)==null?void 0:f.serialized_payloads,fetch_tracking:i==null?void 0:(f=i.feed_backend_data)==null?void 0:f.should_recent_vpv_fetch_tracking_data,original_qid:i==null?void 0:(f=i.feed_backend_data)==null?void 0:f.original_qid,qid:i==null?void 0:(f=i.feed_backend_data)==null?void 0:f.qid,timestamp:g,vsid:i==null?void 0:(f=i.feed_backend_data)==null?void 0:f.vsid,vspos:i==null?void 0:(g=i.feed_backend_data)==null?void 0:g.vspos});d("CometRelay").commitLocalUpdate(e,function(a){a=a.get((a=(a=i.node)==null?void 0:a.id)!=null?a:"");if(a==null)return;a.setValue(!0,"__has_been_seen")})}}};var o=j.createContext(),p=j.createContext(c("emptyFunction"));function e(a){var b=a.children,c=a.environment,d=a.newsFeedEdge,e=m(o);a=l(function(a){e&&e.writeRecentVPVD(c,d,a)},[c,d,e]);return j.jsx(p.Provider,{value:a,children:b})}e.displayName=e.name+" [from "+f.id+"]";g.readRecentViewstateIDs=a;g.createStore=k;g.StoreContext=o;g.LoggerContext=p;g.LoggerProvider=e}),98);
__d("SubscriptionsHandler",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a.remove||a.reset||a.unsubscribe||a.cancel||a.dispose}function j(a){i(a).call(a)}a=function(){function a(){this.$1=[]}var b=a.prototype;b.addSubscriptions=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.every(i)||h(0,3659);this.$1!=null?this.$1=this.$1.concat(b):b.forEach(j)};b.engage=function(){this.$1==null&&(this.$1=[])};b.release=function(){this.$1!=null&&(this.$1.forEach(j),this.$1=null)};b.releaseOne=function(a){var b=this.$1;if(b==null)return;var c=b.indexOf(a);c!==-1&&(j(a),b.splice(c,1),b.length===0&&(this.$1=null))};return a}();g["default"]=a}),98);
__d("UFI2UserActivityIdleTimeout",[],(function(a,b,c,d,e,f){"use strict";a=3e4;f["default"]=a}),66);
__d("CometUserActivityMonitor",["ErrorGuard","ExecutionEnvironment","SubscriptionsHandler","UFI2UserActivityIdleTimeout","UserActivity","Visibility"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=[],k=!1,l=(h||(h=c("ExecutionEnvironment"))).canUseDOM&&c("UserActivity").isOnTab()&&c("UserActivity").isActive(c("UFI2UserActivityIdleTimeout"))?"ACTIVE":"INACTIVE",m=[],n;function o(a){k=!0;m.push.apply(m,j);var b=function(){var b=m.shift();(i||(i=c("ErrorGuard"))).applyWithGuard(function(){return b(a)},null,[],{name:"CometUserActivityMonitor"})};while(m.length)b();k=!1}function p(a){var b=l;l=a;b!==a&&o(a)}function a(){return l}d=function(){n==null&&(n=new(c("SubscriptionsHandler"))(),n.addSubscriptions(c("UserActivity").subscribe(function(a,b){a=b.event;if(/^mouse(enter|leave|move|over|out)$/.test(a.type)&&c("UserActivity").isOnTab()===!1)return;p("ACTIVE")}),function(){var a=function(){p("INACTIVE")};window.addEventListener("blur",a,{passive:!0});return{remove:function(){return window.removeEventListener(a,{passive:!0})}}}(),c("Visibility").addListener(c("Visibility").HIDDEN,function(){p("INACTIVE")})))};function b(a){j.push(a);k&&m.push(a);var b=!1;return{remove:function(){if(b)return;var c=j.indexOf(a);c!==-1&&j.splice(c,1);if(k){c=m.indexOf(a);c!==-1&&m.splice(c,1)}b=!0}}}(h||(h=c("ExecutionEnvironment"))).canUseDOM&&d();g.getActivityState=a;g.init=d;g.subscribe=b}),98);
__d("CometVPVDUserActivityMonitor",["CometUserActivityMonitor"],(function(a,b,c,d,e,f,g){"use strict";a={isUserActive:function(){return d("CometUserActivityMonitor").getActivityState()==="ACTIVE"},subscribe:function(a){var b=d("CometUserActivityMonitor").subscribe(function(b){b=b==="ACTIVE";a&&a(b)});return function(){b&&b.remove()}}};g["default"]=a}),98);
__d("MerlinUnifiedProtocolEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1886750");b=d("FalcoLoggerInternal").create("merlin_unified_protocol_event",a);e=b;g["default"]=e}),98);
__d("FBMerlinImpressionManager",["$InternalEnum","MerlinUnifiedProtocolEventFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h="fb_unknown",i=new Set([78]),j=new Map([[78,"fb_search"],[0,"fb_newsfeed"]]),k=b("$InternalEnum").Mirrored(["Enter","Exit","Update"]),l={};function a(a){return a===0&&c("gkx")("22824")||m(a)?!0:!1}function d(a){return a===0&&c("gkx")("22825")}function m(a){return a==null?!1:i.has(a)}function e(a,b,c,d,e){a={itemId:c,status:k.Enter,time:a};n(a,d,e);a={itemId:c,status:k.Exit,time:b};n(a,d,e)}function n(a,b,c){var d=a.itemId,e=l[d];e==null&&(e={entries:[],itemId:d});l[d]=q(e,a);o(d)&&(p(d,b,c),delete l[d])}function o(a){if(l[a]==null)return!1;a=l[a].entries;if(a.length===0)return!1;a=a[a.length-1];return a.exit!==0}function p(a,b,d){if(l[a]==null)return;var e=l[a].entries.map(function(a){return{enter_ts:a.enter.toString(),exit_ts:a.exit.toString()}}),f=j.get(b);c("MerlinUnifiedProtocolEventFalcoEvent").log(function(){var b;return{element_visibility_absolute_ts:{min_visible_px:e},entity_id:a,origin:(b=f)!=null?b:h,payload:{placeholder_payload:(b=JSON.stringify(d))!=null?b:"{}"}}})}function q(a,b){var c={entries:[],itemId:b.itemId};switch(b.status){case k.Enter:c=r(a,b);break;case k.Exit:c=s(a,b);break;case k.Update:break}return c}function r(a,b){b={enter:b.time,exit:0};return babelHelpers["extends"]({},a,{entries:a.entries.concat(b)})}function s(a,b){var c=[].concat(a.entries),d=c[c.length-1];if(d==null)return a;if(d.enter!==0&&d.exit===0){d={enter:d.enter,exit:b.time};c[c.length-1]=d}return babelHelpers["extends"]({},a,{entries:c})}f={FBMerlinImpressionStatus:k,FBMerlinMergeVPVData:q,isMerlinVPVOnlySources:m,logWithEnterAndExitTimestamps:e,merlinShouldDoubleLog:d,merlinShouldLog:a};g["default"]=f}),98);
__d("useFullViewImpression",["react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function a(a){var b=a.onFullViewStart,d=j({bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1});a=i(function(a){var c=a.entry;a=a.isElementVisible;if(!a&&d.current.hasBeenFullyViewed)d.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1};else if(a&&!d.current.hasBeenFullyViewed){c.intersectionRatio===1?(d.current.bottomRight=!0,d.current.topLeft=!0):(d.current.bottomRight||(d.current.bottomRight=c.boundingClientRect.bottom<=c.rootBounds.bottom&&c.boundingClientRect.right<=c.rootBounds.right),d.current.topLeft||(d.current.topLeft=c.boundingClientRect.top>=c.rootBounds.top&&c.boundingClientRect.left>=c.rootBounds.left));if(d.current.bottomRight&&d.current.topLeft){d.current.hasBeenFullyViewed=!0;return b({currentTime:Date.now()})}}},[b]);var e=i(function(a){a.hiddenTime,a.visibleDuration,a.visibleTime,d.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1}},[]);return c("useVisibilityObserver")({onHidden:e,onIntersection:a,options:{thresholdOverride:"EXPENSIVE"}})}g["default"]=a}),98);
__d("isIntersectionObserverEntryVPVDVisible",["intersectionObserverEntryIsIntersecting"],(function(a,b,c,d,e,f,g){"use strict";var h=200,i={height:0};function a(a,b){b===void 0&&(b=h);var d=c("intersectionObserverEntryIsIntersecting")(a);if(d===!1)return!1;d=a.boundingClientRect;var e=a.intersectionRect,f=a.rootBounds;d=d||i;e=e||i;f=f||i;return e.height>=b||e.height>=f.height/2||e.height===d.height||a.intersectionRatio>.95}g["default"]=a}),98);
__d("isIntersectionObserverEntryVPVDVisiblePct",["intersectionObserverEntryIsIntersecting"],(function(a,b,c,d,e,f,g){"use strict";var h=.5,i={height:0};function a(a,b){b===void 0&&(b=h);var d=c("intersectionObserverEntryIsIntersecting")(a);if(d===!1)return!1;d=a.intersectionRect;var e=a.rootBounds,f=a.boundingClientRect;if(f==null||f.height===0)return!1;d=d||i;e=e||i;return d.height/f.height>=b||d.height>=e.height/2||a.intersectionRatio>.95}g["default"]=a}),98);
__d("vpvdConstants",[],(function(a,b,c,d,e,f){"use strict";a=250;b=200;f.DEFAULT_MIN_VISIBLE_TIME_MS=a;f.DEFAULT_MIN_VISIBLE_PX=b}),66);
__d("useVPVDImpression",["CometVPVDUserActivityMonitor","cr:921407","isIntersectionObserverEntryVPVDVisible","isIntersectionObserverEntryVPVDVisiblePct","react","useVisibilityObserver","vpvdConstants"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var e=a.isLite,f=a.minVisiblePct,g=a.minVisiblePx;g=g===void 0?d("vpvdConstants").DEFAULT_MIN_VISIBLE_PX:g;var h=a.minVisibleTimeMs,j=h===void 0?d("vpvdConstants").DEFAULT_MIN_VISIBLE_TIME_MS:h,k=a.onVPVDEnd;h=a.onVPVDStart;a=b("cr:921407")();var l=a[0];a=a[1];var m=i(function(a){if(a.visibleDuration<j)return;k(a)},[j,k]),n=e===!0?1:g;g=i(function(a){return f!=null?c("isIntersectionObserverEntryVPVDVisiblePct")(a,f):c("isIntersectionObserverEntryVPVDVisible")(a,n)},[n,f]);e=e===!0?null:{thresholdOverride:"EXPENSIVE"};g=babelHelpers["extends"]({activityMonitorOverride:c("CometVPVDUserActivityMonitor"),isEntryInViewport:g},e);e=c("useVisibilityObserver")({onHidden:m,onVisibilityDurationUpdated:a,onVisible:h,options:g});return[e,l]}g["default"]=a}),98);
__d("useViewabilityImpression",["useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.onIntersection;return c("useVisibilityObserver")({onIntersection:a,options:{thresholdOverride:"MODERATE"}})}g["default"]=a}),98);
__d("CometFeedSessionIDContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(-1);g["default"]=b}),98);
__d("MinGapType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5,END_OF_FEED_CONTENT:6,FB_STORIES:7,HIGH_VALUE_PROMOTION:8,FB_STORIES_ENGAGEMENT:9,PYMK:10,SHOWCASE:11,FB_SHORTS:12,TRENDING:13,IFR:14,ENGAGEMENT_QP:15,GROUPS_TAB_UNCONNECTED:16,END_OF_FEED_REELS:17,FRIEND_REQUESTS:18});c=a;f["default"]=c}),66);
__d("AdsExtremeGapUtils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=3,i=6;function a(a,b){if(b!==5)return!1;b=c("gkx")("23035");if(!b)return!1;b=j(a,0);return b>i}function j(a,b){if(a.length===0||b>i)return b;var c=a.length,d=k(a);if(d===-1)return b;return c-d<=h?j(a.slice(0,d),b+1):b}function k(a){for(var b=a.length-1;b>=0;b--)if(a[b].minGapType===5)return b;return-1}g.EXTREME_GAP_DISTANCE=h;g.shouldApplyExtremeGapProtection=a;g.getLastSponsoredStoryPosition=k}),98);
__d("CometAdsProductLoggingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5479");b=d("FalcoLoggerInternal").create("comet_ads_product_logging",a);e=b;g["default"]=e}),98);
__d("CometFeedUnitStatusTrackingUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.map(function(a,c){return b(a)?babelHelpers["extends"]({},a,{position:c}):null}).filter(Boolean)}function b(a){return a.filter(h)}function c(a){return a.filter(i)}function d(a){return a.filter(j)}function e(a){return a.filter(function(a){return a.status==="received"||a.status==="positioned"})}function g(a){var b=a.reduce(function(a,b,c){return j(b)?c:a},-1);return a.map(function(a,c){return c<=b&&!j(a)?babelHelpers["extends"]({},a,{status:"rendered"}):a})}function h(a){return a.status==="rendered"}function i(a){return a.status!=="error"}function j(a){return a.status==="rendered"||a.status==="error"||a.status==="positioned"}f.getFeedUnitsWithOriginalPosition=a;f.getCurrentlyVisibleFeedUnits=b;f.getPossiblyVisibleFeedUnits=c;f.getAllPositionedFeedUnits=d;f.getUncommittedFeedUnits=e;f.getFeedUnitsWithRenderingOutOfOrderFixed=g;f.isCurrentlyVisible=h;f.isPossiblyVisible=i;f.isAnyPositionedType=j}),66);
__d("CometAdsProductLogger",["AdsExtremeGapUtils","CometAdsProductLoggingFalcoEvent","CometFeedUnitStatusTrackingUtils","WebSession"],(function(a,b,c,d,e,f,g){"use strict";var h="SPONSORED",i="comet.home";function a(a){var b=a.adId,d=a.csp,e=a.cts,f=a.endPoint,g=a.getFeedUnitStatusList,i=a.hba,k=a.isv,l=a.minGapRule,m=a.minGapType,n=a.sessionKey,o=a.tracking,p=a.vp;if(m!==h||l==null||b==null)return;c("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:b,csp:d,endpoint:f,event:"impression",hba:i,isv:k,min_gap_shape:{min_gap_rule:l.toString(),min_gap_type:m},session_key:n,timestamp:e,tracking:o,vp:p}});j({adId:b,csp:d,cts:e,endPoint:f,getFeedUnitStatusList:g,hba:i,isv:k,minGapRule:l,minGapType:m,sessionKey:n,tracking:o,vp:p})}function j(a){var b=a.adId,e=a.csp,f=a.cts,g=a.endPoint,h=a.getFeedUnitStatusList,i=a.hba,j=a.isv,k=a.minGapRule,l=a.minGapType,m=a.sessionKey,n=a.tracking,o=a.vp;if(h==null||e==null)return;a=h();h=d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(a,d("CometFeedUnitStatusTrackingUtils").isCurrentlyVisible);a=parseInt(e,10);h=h.slice(0,a-1);var p=d("AdsExtremeGapUtils").shouldApplyExtremeGapProtection(h,5);if(!p)return;var q=a-d("AdsExtremeGapUtils").getLastSponsoredStoryPosition(h);c("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:b,csp:e,endpoint:g,event:"extreme_experience",hba:i,isv:j,min_gap_shape:{min_gap_rule:k!=null?k.toString():null,min_gap_type:l},product_features:q<=d("AdsExtremeGapUtils").EXTREME_GAP_DISTANCE?"not protected":"protected",session_key:m,timestamp:f,tracking:n,vp:o}})}function b(a){var b=a.adId,e=a.endPoint,f=e===void 0?i:e,g=a.minGapRule,h=a.minGapType;e=Date.now();var j=Math.floor(e/1e3);c("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:b,csp:null,endpoint:f,event:"cta_click",hba:!1,isv:null,min_gap_shape:{min_gap_rule:g!=null?g.toString():null,min_gap_type:h},product_features:"primary_blue_cta_button",session_key:d("WebSession").getId(),timestamp:j.toString(),tracking:null,vp:null}})}function e(a){var b=a.endPoint,e=b===void 0?i:b,f=a.minGapRule,g=a.minGapType;b=Date.now();var h=Math.floor(b/1e3);c("CometAdsProductLoggingFalcoEvent").logImmediately(function(){return{ad_id:null,csp:"0",endpoint:e,event:"impression",hba:!1,isv:null,min_gap_shape:{min_gap_rule:f!=null?f.toString():null,min_gap_type:g},product_features:"highest_position_ad_from_multifeed",session_key:d("WebSession").getId(),timestamp:h.toString(),tracking:null,vp:null}})}g.logCometAdsProductGapRule=a;g.logCometAdsProductGapRuleExtremeExperience=j;g.logCometAdsProductPrimaryBlueCTAButtonClick=b;g.logCometFeedHighestPositionAd=e}),98);
__d("CometFeedBrandSafetyContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(null);g["default"]=b}),98);
__d("CometFeedBrandSafetyLoggingUtil",["CometFeedUnitStatusTrackingUtils","FBLogger","NetworkStatus"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c){if(a==null||b==null)return null;a=a();a=d("CometFeedUnitStatusTrackingUtils").getFeedUnitsWithOriginalPosition(a,d("CometFeedUnitStatusTrackingUtils").isPossiblyVisible);var e=a.findIndex(function(a){return a.position===c});if(!h(a,e))return null;b=b();var f=i(a,b,e-1),g=i(a,b,e+1);e=j(a,b,e);return{brs_filter_setting:e,feed_size:a.length.toString(),feed_state:l(b),unit_after:g,unit_before:f}}function h(a,b){return((a=a[b])==null?void 0:a.category)==="SPONSORED"}function i(a,b,c){a=k(a,b,c);return a&&{brs_content_label:(b=a.brsContentLabel)==null?void 0:b.toString(),organic_tracking:a.tracking,unit_type:a.unitType}}function j(a,b,c){a=k(a,b,c);return a==null?void 0:(b=a.brsFilterSetting)==null?void 0:b.toString()}function k(a,b,d){var e=a[d];if(e==null)return null;var f=e.key;f=b.feedUnitRegistry[f];f==null&&e.status==="rendered"?c("FBLogger")("comet_feed_unit_brand_safety_null_brs_info").warn("Unable to find a CometFeedUnitBrandSafetyInfo for position %s and deduplicationKey %s. feedUnitStatusList: %s. brsRegistry: %s",d,e.key,JSON.stringify(a),JSON.stringify(Object.keys(b.feedUnitRegistry))):e.status==="error"&&c("FBLogger")("comet_feed_unit_brand_safety_error_status").mustfix("CometFeedUnitStatus is error for position %s and deduplicationKey %s. feedUnitStatusList: %s. brsRegistry: %s",d,e.key,JSON.stringify(a),JSON.stringify(Object.keys(b.feedUnitRegistry)));return f}function l(a){a=a.feedStateInfoRef.current;if(a==null){c("FBLogger")("comet_feed_unit_brand_safety_feed_state").mustfix("feedStateInfo was not initialized correctly");return"feed_uninitialized_state_info"}var b=a.hasMore,d=a.isEOFError,e=a.isLoading;a=a.showEOFMessageAfterFeedStoppedLoading;var f=c("NetworkStatus").isOnline();if(d)if(f)return"feed_eof_error_while_online";else return"feed_eof_error_while_offline";else if(a)if(f)return"feed_eof_no_more_stories_while_online";else return"feed_eof_no_more_stories_while_offline";else if(b&&e)return"feed_has_more_and_is_loading";else if(b)return"feed_has_more";else if(e)return"feed_is_loading";else return"feed_unknown"}g.getBrandSafetyFieldForAdImpression=a;g.isSponsored=h;g.getBrsInfo=k;g.getFeedState=l}),98);
__d("CometFeed5sImpressionDelayContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({firstAdStoryPosition:null,firstLoggedAdImpressionStoryPosition:null,hasAnyAdImpressionAlreadyBeenLogged:!1,hasUserSeenAnyAd:!1});g["default"]=b}),98);
__d("CometFeedUnitStatusListPassiveContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext(null);g["default"]=b}),98);
__d("useNoopDebuggingInfoComponent",[],(function(a,b,c,d,e,f){"use strict";var g=function(){};function a(){return[null,g]}f["default"]=a}),66);
__d("CometMetricsFullViewFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1936086");b=d("FalcoLoggerInternal").create("comet_metrics_full_view",a);e=b;g["default"]=e}),98);
__d("useStoryFullViewLogger",["CometMetricsFullViewFalcoEvent","react","requireDeferred","useFullViewImpression","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useRef,k=c("requireDeferred")("Banzai").__setRef("useStoryFullViewLogger");function a(a,b,d){var e=j(!1);d=i(function(d){d.currentTime;if(!e.current&&a!=null){e.current=!0;var f=a,g=b,h=c("uuidv4")(),i={csp:g,event_trace_id:h,xt:f};c("CometMetricsFullViewFalcoEvent").log(function(){return{csp:g.toString(),event_trace_id:h,xt:f}});k.onReady(function(a){a.post("comet_metrics:full_view",i)})}},[b,a]);return c("useFullViewImpression")({onFullViewStart:d})}g["default"]=a}),98);
__d("WebVpvDurationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1837580");b=d("FalcoLoggerInternal").create("web_vpv_duration",a);e=b;g["default"]=e}),98);
__d("useCometFeedUnitGapInfo",["CometFeedUnitStatusListPassiveContext","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useRef,l=function(a){return a==="SPONSORED"||a==="ENGAGEMENT"||a==="FIXED_POSITION"||a==="PROMOTION"};function a(){var a=k(null),b=j(c("CometFeedUnitStatusListPassiveContext")),d=i(function(a){if(b==null)return null;if(a<0){c("recoverableViolation")("computeGapInfoForPosition called with invalid feed position "+a,"comet_feed");return null}var d=b(),e=d[a];if(e==null){d.length>0&&c("recoverableViolation")("feed position "+a+" does not exist in getFeedUnitStatusListPassive (length:"+d.length+")","comet_feed");return null}var f=e.category;if(!l(f))return null;e=e.minGapType;var g=-1,h=-1,i=-1,j=-1;for(var k=a-1;k>=0;k--){var m,n=a-k;m=(m=d[k])==null?void 0:m.category;switch(m){case"ENGAGEMENT":g=g===-1?n:g;break;case"FIXED_POSITION":h=h===-1?n:h;break;case"PROMOTION":i=i===-1?n:i;break;case"SPONSORED":j=j===-1?n:j;break}if(g!==-1&&h!==-1&&i!==-1&&j!==-1)break}return{dist_to_engagement:g,dist_to_fixed:h,dist_to_promo:i,dist_to_sponsored:j,dist_to_top:a+1,min_gap_type:e,story_category:f}},[b]);return i(function(b){var c=a.current;(b<0||c==null||c.dist_to_top!==b+1)&&(a.current=d(b));return a.current},[d])}g["default"]=a}),98);
__d("useStoryVPVDLogger",["CometFeedSessionIDContext","CometInteractionSourceContext","CometNewsFeedVPVDStore","FBMerlinImpressionManager","Random","WebSession","WebVpvDurationFalcoEvent","gkx","qex","react","requireDeferred","useCometFeedUnitGapInfo","useCurrentRoute","useMinifiedProductAttribution","useVPVDImpression"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useRef,l=c("requireDeferred")("ODS").__setRef("useStoryVPVDLogger"),m=c("qex")._("424")===!0,n=function(a,b,c){return babelHelpers["extends"]({csp:a.position,feed_session_id:c,is_agg:a.isAggregated,is_self:a.isSelfPost,logged_before:a.loggedBefore,nav_attribution_id_v2:a.aidv2,sid_raw:d("WebSession").getId(),source:a.source,source_override:a.source_override,story_height:a.story_height,story_width:a.story_width,vpvd_start_timestamp_ms:a.visibleTime,vpvd_time_delta_ms:a.hiddenTime-((c=a.visibleTime)!=null?c:0),xt:a.encrypted_tracking},b)},o=1e3;function a(a){var b=a.interactionSourceOverride,e=a.isAggregated,f=e===void 0?null:e;e=a.isSelfPost;var g=e===void 0?null:e;e=a.navChainOverride;e=e===void 0?null:e;var h=a.position,p=a.trackable,q=j(c("CometInteractionSourceContext")),r=j(c("CometFeedSessionIDContext")),s=c("useCometFeedUnitGapInfo")();a=c("useCurrentRoute")()||{};var t=a.tracePolicy,u=c("useMinifiedProductAttribution")()||"";e!=null&&(u=e);var v=j(d("CometNewsFeedVPVDStore").LoggerContext),w=k(null),x=k(null),y=k(!1);a=i(function(a){var b=a.entry;a=a.visibleTime;v(a);w.current=(a=b==null?void 0:(a=b.boundingClientRect)==null?void 0:a.height)!=null?a:null;x.current=(b=b==null?void 0:(a=b.boundingClientRect)==null?void 0:a.width)!=null?b:null},[v]);e=i(function(a){var e,i,j=a.hiddenTime;a=a.visibleTime;var k=(e=b)!=null?e:q;if(!c("FBMerlinImpressionManager").isMerlinVPVOnlySources(k)&&k===10){d("Random").coinflip(o)&&l.onReady(function(a){a.bumpEntityKey(3372,"comet.unknown_vpvd_tracepolicy",((a=t)!=null?a:"empty")+"_"+k,o)});return}e=w.current!=null?Math.round(w.current):null;var v=x.current!=null?Math.round(x.current):null,z=s(h),A=n({aidv2:u,encrypted_tracking:(i=p)!=null?i:"",hiddenTime:j,isAggregated:f,isSelfPost:g,loggedBefore:y.current,position:h,source:q,source_override:b,story_height:e,story_width:v,visibleTime:a},z,m?r.toString():null);y.current=!0;i=c("FBMerlinImpressionManager").merlinShouldLog(k);e=c("FBMerlinImpressionManager").isMerlinVPVOnlySources(k);v=!i&&!e;if(i){c("FBMerlinImpressionManager").logWithEnterAndExitTimestamps(a,j,(z=p)!=null?z:"",k,A)}v&&c("WebVpvDurationFalcoEvent").log(function(){return{client_viewstate_position:JSON.stringify(A.csp),json_data:JSON.stringify(A)}})},[b,q,s,h,u,p,f,g,r,t]);return c("useVPVDImpression")({onVPVDEnd:e,onVPVDStart:a})}g["default"]=a}),98);
__d("CometMetricsViewabilityFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1948176");b=d("FalcoLoggerInternal").create("comet_metrics_viewability",a);e=b;g["default"]=e}),98);
__d("PercentVisible",[],(function(a,b,c,d,e,f){a=-1;b=0;c=50;d=100;f.NO_VISIBLE=a;f.VISIBLE_0_PCT=b;f.VISIBLE_50_PCT=c;f.VISIBLE_100_PCT=d}),66);
__d("useStoryViewabilityDurationLogger",["Banzai","CometMetricsViewabilityFalcoEvent","PercentVisible","react","useViewabilityImpression","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function k(a,b,d){c("CometMetricsViewabilityFalcoEvent").logImmediately(function(){return{cumulative:a.cumulative.toString(),duration:a.duration.toString(),event_trace_id:b,interval:a.interval.toString(),segment_id:a.segmentid.toString(),start_ts:a.startTs.toString(),view_event_type:a.eventType.toString(),xt:d}})}function a(a,b,e){var f=j(null),g=j(null),h=j(null);b=i(function(b){var e=b.entry;b=b.isElementVisible;var i=function(a,b){return{cumulative:a-b.startTs,duration:a-b.startTs,eventType:b.eventType,interval:a-b.cumulative-b.startTs,segmentid:b.segmentid+1,startTs:b.startTs}},j=function(b){var d=c("uuidv4")(),e={cumulative:b.cumulative,duration:b.duration,event_trace_id:d,eventType:b.eventType,interval:b.interval,segmentid:b.segmentid,startTs:b.startTs,xt:a};k(b,d,a);b=babelHelpers["extends"]({},c("Banzai").VITAL,{signal:!1});c("Banzai").post("comet_metrics:viewability",e,b)},l=function(a,b,c){if(c==null)return null;b=i(a,c);j(b);return null},m=function(a,b,c){c==null?b={cumulative:0,duration:0,eventType:b,interval:0,segmentid:0,startTs:a}:b=i(a,c);b.segmentid<=2&&j(b);return b};!b?(f.current=l(e.time,d("PercentVisible").VISIBLE_0_PCT,f.current),g.current=l(e.time,d("PercentVisible").VISIBLE_50_PCT,g.current),h.current=l(e.time,d("PercentVisible").VISIBLE_100_PCT,h.current)):e.intersectionRatio<.5?(f.current=m(e.time,d("PercentVisible").VISIBLE_0_PCT,f.current),g.current=l(e.time,d("PercentVisible").VISIBLE_50_PCT,g.current),h.current=l(e.time,d("PercentVisible").VISIBLE_100_PCT,h.current)):e.intersectionRatio>=.5&&e.intersectionRatio<1?(f.current=m(e.time,d("PercentVisible").VISIBLE_0_PCT,f.current),g.current=m(e.time,d("PercentVisible").VISIBLE_50_PCT,g.current),h.current=l(e.time,d("PercentVisible").VISIBLE_100_PCT,h.current)):(f.current=m(e.time,d("PercentVisible").VISIBLE_0_PCT,f.current),g.current=m(e.time,d("PercentVisible").VISIBLE_50_PCT,g.current),h.current=m(e.time,d("PercentVisible").VISIBLE_100_PCT,h.current))},[a]);return c("useViewabilityImpression")({onIntersection:b})}g["default"]=a}),98);
__d("DebugOwl",["cr:1801726"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){return void 0};c=(a=b("cr:1801726"))!=null?a:{burrow:h,flap:h,fly:h,hoot:h,listen:function(){return h},nest:h,peck:h,perch:h,swoop:h};d=c;g["default"]=d}),98);
__d("CometGHLTracker",["DebugOwl","GHLBox"],(function(a,b,c,d,e,f,g){"use strict";var h=new Set();function a(a){c("DebugOwl").swoop(a),h.add(a),h.size>d("GHLBox").MinimumHiddenAdsToUpdateLocalStorage&&d("GHLBox").s(Date.now())}function b(a){return h.has(a)}function e(a){return h["delete"](a)}function f(){return h.size>0}function i(){return h.size}g.m=a;g.c=b;g.d=e;g.b=f;g.s=i}),98);
__d("GhlSwankFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1955947");b=d("FalcoLoggerInternal").create("ghl_swank",a);e=b;g["default"]=e}),98);
__d("cometGHLContentDisplayCheck",["cr:1824699"],(function(a,b,c,d,e,f,g){"use strict";var h=!0,i=!1;function a(a){var c=document.body;c=c==null||!c.contains(a);b("cr:1824699")&&b("cr:1824699").flap(a,{notMounted:c});if(c)return h;c=a.offsetHeight===0;b("cr:1824699")&&b("cr:1824699").flap(a,{zeroHeight:c});if(c)return i;c=Array.from(a.getElementsByTagName("img"));var d=c.length===0;b("cr:1824699")&&b("cr:1824699").flap(a,{noImages:d});if(c.length===0)return h;d=c.find(j)!=null;b("cr:1824699")&&b("cr:1824699").flap(a,{hasImageWithSize:d});if(d)return h;c=Array.from(a.getElementsByTagName("svg"));if(c.find(k)!=null)return h;d=Array.from(a.getElementsByTagName("i"));if(d.find(k)!=null)return h;b("cr:1824699")&&b("cr:1824699").flap(a,{noSuccessfulChecks:!0});return i}var j=function(a){return a.offsetHeight+a.offsetWidth>0},k=function(a){a=a.getBoundingClientRect();return a.height*a.width>0};g["default"]=a}),98);
__d("CometGHLDisplayMonitor",["DebugOwl","clearTimeout","cometGHLContentDisplayCheck","gkx","recoverableViolation","setTimeoutCometLoggingPri"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=1e3,j=null,k=!1,l=new Set();a=function(a,b){h.has(a)||h.set(a,new Set());var d=h.get(a);if(d==null){c("recoverableViolation")("Expected Set to be declared for container","GHL");return{dispose:function(){}}}d.add(b);j===null&&m();return{dispose:function(){d["delete"](b),d.size===0&&(h["delete"](a),h.size===0&&(c("clearTimeout")(j),j=null))}}};var m=function a(){h.forEach(function(a,b){b=b.current;if(b==null||o(b)||!c("cometGHLContentDisplayCheck")(b))return;a.forEach(function(a,b){a=b.onLogBlockCallback;var d=b.startTime;b=b.targetRef;b=b.current;c("DebugOwl").hoot(b);if(b==null)return;var e=o(b)!=null;c("DebugOwl").flap(b,{hiddenByFB:e});if(e)return;e=c("cometGHLContentDisplayCheck")(b);if(!e){b=Date.now()-d;a(b);n()}})}),j=c("setTimeoutCometLoggingPri")(a,i)};b=function(a){l.add(a);k&&a();return{dispose:function(){l["delete"](a)}}};var n=function(){if(k===!0)return;k=!0;l.forEach(function(a){return a()})},o=function(a){return a.closest==null||a.closest(p)},p=function(){return"."+"x1s85apg".split(" ").pop()+(c("gkx")("21000")?",."+"xdps06".split(" ").pop():"")}();g.m=a;g.subscribeAny=b}),98);
__d("useCometGHLDisplayMonitor",["CometGHLDisplayMonitor","GHLSurfaceContainerContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect,k=b.useRef;function a(a,b){var e=k(null),f=i(c("GHLSurfaceContainerContext"));j(function(){var c=null,g=Date.now();if(f===null)return;if(!a)return;c=d("CometGHLDisplayMonitor").m(f,{onLogBlockCallback:b,startTime:g,targetRef:e});return function(){c&&c.dispose()}},[f,a,b]);return e}g["default"]=a}),98);
__d("useCometGHLFeedSurvey",["CometGHLTracker","DebugOwl","GhlSwankFalcoEvent","cr:1088657","react","useCometGHLDisplayMonitor","useMergeRefs","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect;function a(a){var e=a.encryptedToken,f=a.position,g=(h||(h=c("useUnsafeRef_DEPRECATED")))(!1);a=j(function(a){if(g.current||e==null)return;g.current=!0;c("GhlSwankFalcoEvent").log(function(){return{hd:String(a),sli:String(f),xt:e}});var h=i.current;if(h!==null){d("CometGHLTracker").m(h);b("cr:1088657")&&b("cr:1088657").b({e:h,hd:a,token:(h=e)!=null?h:""})}},[e,f]);var i=c("useCometGHLDisplayMonitor")(!g.current,a);k(function(){var a=i.current;return function(){a&&d("CometGHLTracker").d(a)}},[i]);a=j(function(a){c("DebugOwl").nest(a,{location:"FEED",position:f})},[f]);return c("useMergeRefs")(i,a)}f=a;g["default"]=f}),98);
__d("CometMetricsViewableImpressionDelayFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("5255");b=d("FalcoLoggerInternal").create("comet_metrics_viewable_impression_delay",a);e=b;g["default"]=e}),98);
__d("CometMetricsViewableImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1900896");b=d("FalcoLoggerInternal").create("comet_metrics_viewable_impression",a);e=b;g["default"]=e}),98);
__d("FacebookBrandSafetyImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4323");b=d("FalcoLoggerInternal").create("facebook_brand_safety_impression",a);e=b;g["default"]=e}),98);
__d("CometMetricsChannel2ViewabilityFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1960868");b=d("FalcoLoggerInternal").create("comet_metrics_channel2_viewability",a);e=b;g["default"]=e}),98);
__d("getCentralImpressionScrollSpeed",["cr:5662"],(function(a,b,c,d,e,f){"use strict";var g=0,h=Date.now(),i=null,j=null;function a(a){b("cr:5662").listen(window,"scroll",function(){j&&clearTimeout(j),j=setTimeout(function(){return a()},100)},b("cr:5662").Priority.NORMAL,{passive:!0})}function k(){var a=window.scrollY,b=Date.now();if(i!=null&&b!==h){var c=a-i;g=c/(b-h)*1e3}i=a;h=b}a(function(){g=0,i=null});b("cr:5662").listen(window,"scroll",function(){return k()},b("cr:5662").Priority.NORMAL,{passive:!0});e.exports=function(){return g}}),null);
__d("getCentralImpressionTimeAfterRefresh",[],(function(a,b,c,d,e,f){"use strict";var g=null;window.addEventListener("load",function(){g=Date.now()},{passive:!0});function a(){return g!=null?Date.now()-g:0}f["default"]=a}),66);
__d("sendImpressionEnterActionValidationData",["CometMetricsChannel2ViewabilityFalcoEvent","CometTimeSpentNavigation","WebSession","getCentralImpressionScrollSpeed","getCentralImpressionTimeAfterRefresh","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=b.impressedAt,h=c("CometTimeSpentNavigation").getPathInfo(),i=c("uuidv4")(),j=c("getCentralImpressionScrollSpeed")(),k=d("WebSession").getId(),l={intersect_rect:b.intersectionRect,root:b.rootBounds,target_rect:b.boundingClientRect};c("CometMetricsChannel2ViewabilityFalcoEvent").logImmediately(function(){return{csp:f.csp!=null?String(f.csp):"",cts:g.toString(),eid:f.eid!=null?String(f.eid):"",event_trace_id:i,framework:a,me:h?h.name:null,pre_rs:e?e.invisibleReason:null,rects:l,scroll_speed:j.toString(),sk:k,time_from_load:c("getCentralImpressionTimeAfterRefresh")().toString(),vp:b.visiblePercentage.toString(),xt:f.xt!=null?String(f.xt):""}})}g["default"]=a}),98);
__d("sendImpressionExitActionValidationData",["CometMetricsChannel2ViewabilityFalcoEvent","CometTimeSpentNavigation","WebSession","getCentralImpressionScrollSpeed","getCentralImpressionTimeAfterRefresh","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=b.impressedAt,h=c("CometTimeSpentNavigation").getPathInfo(),i=c("uuidv4")(),j=g?Date.now()-g:null,k={intersect_rect:b.intersectionRect,root:b.rootBounds,target_rect:b.boundingClientRect};c("CometMetricsChannel2ViewabilityFalcoEvent").logImmediately(function(){return{csp:f.csp!=null?String(f.csp):"",cts:String(g),duration:j!=null?String(j):null,eid:f.eid!=null?String(f.eid):"",event_trace_id:i,exit_rs:b.invisibleReason,framework:a,me:h?h.name:null,pre_rs:Object.prototype.hasOwnProperty.call(f,"pre_rs")?String(f.pre_rs):"",pre_vp:e?String(e.visiblePercentage):null,rects:k,scroll_speed:c("getCentralImpressionScrollSpeed")().toString(),sk:d("WebSession").getId(),time_from_load:c("getCentralImpressionTimeAfterRefresh")().toString(),vp:b.visiblePercentage.toString(),xt:f.xt!=null?String(f.xt):""}})}g["default"]=a}),98);
__d("useStoryObserverImpressionLogger",["CometAdsProductLogger","CometFeed5sImpressionDelayContext","CometFeedAdsProductContext","CometFeedBrandSafetyContext","CometFeedBrandSafetyLoggingUtil","CometFeedUnitStatusListPassiveContext","CometGHLTracker","CometMetricsViewableImpressionDelayFalcoEvent","CometMetricsViewableImpressionFalcoEvent","CometTimeSpentNavigation","DebugOwl","FBLogger","FacebookBrandSafetyImpressionFalcoEvent","WebSession","cr:1813330","cr:5881","ghlTestUBT","gkx","justknobx","randomInt","react","registerSourceForView","sendImpressionEnterActionValidationData","sendImpressionExitActionValidationData","setTimeout","useMinifiedProductAttribution","usePartialViewImpression","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;e=h||d("react");var i=e.useCallback,j=e.useContext,k=e.useEffect,l=e.useRef,m={can_delay_log_impression:!1,subsequent_gap_in_ms:6e4},n=5e3;function a(a,e,f,g,h,p){g===void 0&&(g=!1);h===void 0&&(h=null);var q=babelHelpers["extends"]({},m,f),r=l(null),s=l(null),t=l(null),u=l(!1),v=l(!1),w=c("useMinifiedProductAttribution")();k(function(){c("ghlTestUBT")(function(a){u.current=a})},[]);k(function(){return function(){r.current=null,v.current=!1,t.current=null}},[h]);var x=j(c("CometFeedUnitStatusListPassiveContext")),y=j(c("CometFeedBrandSafetyContext")),z=j(c("CometFeed5sImpressionDelayContext"));f=j(c("CometFeedAdsProductContext"));var A=f.adId,B=f.minGapRule,C=f.minGapType;h=i(function(f){var h=f.entry,i=f.visibleTime;c("DebugOwl").perch(h.target);b("cr:1813330")==null?void 0:b("cr:1813330").setNewsFeedStoryPosition(e);var j=function(b,g){g=Date.now();var h=c("CometTimeSpentNavigation").getPathInfo(),j=d("CometGHLTracker").c(b.target);c("DebugOwl").fly(b.target);var f=e,k=Math.floor(g/1e3),l=g+"_"+(c("randomInt")(0,4294967295)+1),m=j,n=h?h.name:null,q=d("WebSession").getId(),r=b.visiblePercentage,s=a,t=c("uuidv4")(),u=d("CometFeedBrandSafetyLoggingUtil").getBrandSafetyFieldForAdImpression(x,y,e),D=null,F;if(c("justknobx")._("616")){f==null&&c("FBLogger")("comet_impression").mustfix("storyPosition param %s is invalid. event_trace_id: %s, aidv2: %s",f,t,w);F=(g=f==null?void 0:f.toString())!=null?g:"0"}else F=f.toString();c("CometMetricsViewableImpressionFalcoEvent").logImmediately(function(){return{aidv2:w,brs:u,csp:F,cts:k.toString(),etid:l,event_trace_id:t,hba:m,isv:"1",me:n,sk:q,vp:r.toString(),xt:s}});if(x){j=x();((h=j[f])==null?void 0:h.category)==="SPONSORED"&&(z.hasAnyAdImpressionAlreadyBeenLogged===!1&&(z.hasAnyAdImpressionAlreadyBeenLogged=!0,z.firstLoggedAdImpressionStoryPosition=e))}D&&c("FacebookBrandSafetyImpressionFalcoEvent").logImmediately(function(){return D});o(u,p,i,e);d("CometAdsProductLogger").logCometAdsProductGapRule({adId:A,csp:F,cts:k.toString(),endPoint:n,getFeedUnitStatusList:x,hba:m,isv:"1",minGapRule:B,minGapType:C,sessionKey:q,tracking:s,vp:r.toString()});c("registerSourceForView")(null,s);v.current=!0},k={boundingClientRect:h.boundingClientRect,impressedAt:i,intersectionRect:h.intersectionRect,invisibleReason:null,rootBounds:h.rootBounds,status:"ENTER",target:h.target,visible:!0,visiblePercentage:h.intersectionRatio};g&&c("sendImpressionEnterActionValidationData")("impression_api_comet_enter",k,null,{csp:e,pre_rs:r.current,xt:a});if(t.current||s.current)return;if(q.can_delay_log_impression===!0&&(u.current||d("CometGHLTracker").b()||c("gkx")("23488"))){var l=!1,m=z.hasAnyAdImpressionAlreadyBeenLogged;z.hasUserSeenAnyAd===!1&&(l=!0,z.hasUserSeenAnyAd=!0,z.firstAdStoryPosition=e);var D=c("uuidv4")(),E=(f=e==null?void 0:e.toString())!=null?f:"0",F=c("gkx")("23490"),G=c("gkx")("23491");h=F;f=d("CometGHLTracker").b();var H=!z.hasAnyAdImpressionAlreadyBeenLogged,I=f,J=d("CometGHLTracker").s(),K=n,L=0,M=h?n:0,N=h||f?n:0,O=h||f||H?n:0;h=n;c("gkx")("1691")?h=K:c("gkx")("1692")?h=N:c("gkx")("1693")&&(h=O);c("setTimeout")(function(){G&&c("CometMetricsViewableImpressionDelayFalcoEvent").logImmediately(function(){return{csp:E,custom_event_name:"comet_impression_proposal_B",delay:L.toString(),has_blocked_elements:I,hba:d("CometGHLTracker").c(k.target),is_adblocker_user:F,is_any_impression_already_logged:m,is_first_ad:l,num_blocked_elements:J.toString(),uid:D,xt:a}})},L);c("setTimeout")(function(){G&&c("CometMetricsViewableImpressionDelayFalcoEvent").logImmediately(function(){return{csp:E,custom_event_name:"comet_impression_proposal_C",delay:M.toString(),has_blocked_elements:I,hba:d("CometGHLTracker").c(k.target),is_adblocker_user:F,is_any_impression_already_logged:m,is_first_ad:l,num_blocked_elements:J.toString(),uid:D,xt:a}})},M);c("setTimeout")(function(){G&&c("CometMetricsViewableImpressionDelayFalcoEvent").logImmediately(function(){return{csp:E,custom_event_name:"comet_impression_proposal_D",delay:N.toString(),has_blocked_elements:I,hba:d("CometGHLTracker").c(k.target),is_adblocker_user:F,is_any_impression_already_logged:m,is_first_ad:l,num_blocked_elements:J.toString(),uid:D,xt:a}})},N);c("setTimeout")(function(){G&&c("CometMetricsViewableImpressionDelayFalcoEvent").logImmediately(function(){return{csp:E,custom_event_name:"comet_impression_proposal_E",delay:O.toString(),has_blocked_elements:I,hba:d("CometGHLTracker").c(k.target),is_adblocker_user:F,is_any_impression_already_logged:m,is_first_ad:l,num_blocked_elements:J.toString(),uid:D,xt:a}})},O);c("setTimeout")(function(){G&&c("CometMetricsViewableImpressionDelayFalcoEvent").logImmediately(function(){return{csp:E,custom_event_name:"comet_impression_proposal_A",delay:K.toString(),has_blocked_elements:d("CometGHLTracker").b(),hba:d("CometGHLTracker").c(k.target),is_adblocker_user:F,is_any_impression_already_logged:m,is_first_ad:l,num_blocked_elements:d("CometGHLTracker").s().toString(),uid:D,xt:a}})},K);s.current=c("setTimeout")(function(){j&&j(k,"AD_BLOCKER"),s.current=null},h)}else j&&j(k,v.current?"DEDUP":"ORIGINAL")},[g,q.can_delay_log_impression,e,a,w]);f=i(function(b){var d=b.hiddenReason,f=b.visibleDuration;b=b.visibleTime;g&&c("sendImpressionExitActionValidationData")("impression_api_comet_exit",{impressedAt:b,invisibleReason:d,visiblePercentage:0},null,{csp:e,duration:f,pre_rs:r.current,xt:a});r.current=d;if(t.current)return;(v.current||s.current)&&(t.current=c("setTimeout")(function(){v.current=!1,t.current=null},q.subsequent_gap_in_ms))},[q.subsequent_gap_in_ms,e,a,g]);return c("usePartialViewImpression")({onImpressionEnd:f,onImpressionStart:h})}function o(a,c,d,e){var f=a==null?void 0:a.brs_filter_setting;if(b("cr:5881")!=null&&parseInt(f,10)>0){var g=a==null?void 0:a.unit_after,h=a==null?void 0:a.unit_before;b("cr:5881").log(function(){var a;return{ad_insertion_status:"INSERTED",ad_insertion_sub_status:"VALID_COMPATIBLE",ad_inventory_filter:String(f),adjacent_edges_info:{unit_after:g!=null?{brs_content_label:(a=g.brs_content_label)!=null?a:"",organic_tracking:(a=g.organic_tracking)!=null?a:""}:null,unit_before:h!=null?{brs_content_label:(a=h.brs_content_label)!=null?a:"",organic_tracking:(a=h.organic_tracking)!=null?a:""}:null},client_token:(a=c)!=null?a:"",feed_session_id:"",impression_original_timestamp_ms:String(d),slot_position:String(e)}})}}g["default"]=a}),98);
__d("useStoryViewabilityLogger",["mergeRefs","react","useCometGHLFeedSurvey","useStoryFullViewLogger","useStoryObserverImpressionLogger","useStoryVPVDLogger","useStoryViewabilityDurationLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function k(a,b,c){return function(){return null}}function a(a){var b=a.clientToken,d=a.clientViewConfig;d=d===void 0?null:d;var e=a.contentIdentifier;e=e===void 0?null:e;var f=a.disabledViewabilityEventTypes,g=a.encryptedTracking,h=a.position,l=a.viewabilityConfig;a=a.vpvdOptionalData;var m=[];function n(a,b){return l&&l.includes(a)&&(!f||!f.includes(a))?b:null}var o=!!l&&l.some(function(a){return a===7}),p=n(8,c("useStoryObserverImpressionLogger")(g,h,d,o,e,b)),q=n(7,k(g,h,d)),r=n(2,c("useStoryFullViewLogger")(g,h,d)),s=n(3,c("useStoryViewabilityDurationLogger")(g,h,d));o=c("useStoryVPVDLogger")(babelHelpers["extends"]({},a,{position:h,trackable:g}));e=o[0];b=o[1];m.push(b);var t=n(5,e),u=c("useCometGHLFeedSurvey")({clientViewConfig:d,encryptedToken:g,position:h});a=j(function(){return c("mergeRefs")(p,q,r,s,t,u,null)},[p,q,r,s,t,u]);return{debuggingInfoLoggers:m.map(function(a,b){return i.jsx("div",{children:a},b)}),ref:a}}g["default"]=a}),98);
__d("VirtualizationContext",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext();g["default"]=b}),98);
__d("getOwnObjectValues",[],(function(a,b,c,d,e,f){function a(a){return Object.keys(a).map(function(b){return a[b]})}f["default"]=a}),66);
__d("BrandSafetyOpportunityLossRateFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1305");b=d("FalcoLoggerInternal").create("brand_safety_opportunity_loss_rate",a);e=b;g["default"]=e}),98);